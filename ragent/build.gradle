description = 'Router agent'
apply plugin: 'distribution'

task runMocha(type: Exec) {
    onlyIf {
        def result = exec {
            executable = "which"
            args "mocha"
            ignoreExitValue = true
        }
        result.exitValue == 0
    }
    executable = "mocha"
}
test.dependsOn(runMocha)

task pack(type: Tar) {
    from (projectDir) {
        include '*.js'
    }
    compression = Compression.GZIP
    archiveName "ragent.tgz"
    destinationDir file('build')
}
